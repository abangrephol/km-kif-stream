/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/videojs-resolution-switcher-vjs7@1.0.0/videojs-resolution-switcher.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(){"use strict";var e=null;e=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){var r,l={ui:!0},n=t.getComponent("MenuItem"),s=t.extend(n,{constructor:function(e,r){r.selectable=!0,n.call(this,e,r),this.src=r.src,e.on("resolutionchange",t.bind(this,this.update))}});s.prototype.handleClick=function(e){n.prototype.handleClick.call(this,e),this.player_.currentResolution(this.options_.label)},s.prototype.update=function(){var e=this.player_.currentResolution();this.selected(this.options_.label===e.label)},n.registerComponent("ResolutionMenuItem",s);var o=t.getComponent("MenuButton"),i=t.extend(o,{constructor:function(e,r){if(this.label=document.createElement("span"),r.label="Quality",o.call(this,e,r),this.el().setAttribute("aria-label","Quality"),this.controlText("Quality"),r.dynamicLabel)t.dom.addClass(this.label,"vjs-resolution-button-label"),this.el().appendChild(this.label);else{var l=document.createElement("span");t.dom.addClass(l,"vjs-menu-icon"),this.el().appendChild(l)}e.on("updateSources",t.bind(this,this.update))}});i.prototype.createItems=function(){var e=[],t=this.sources&&this.sources.label||{};for(var r in t)t.hasOwnProperty(r)&&e.push(new s(this.player_,{label:r,src:t[r],selected:r===(!!this.currentSelection&&this.currentSelection.label)}));return e},i.prototype.update=function(){return this.sources=this.player_.getGroupedSrc(),this.currentSelection=this.player_.currentResolution(),this.label.innerHTML=this.currentSelection?this.currentSelection.label:"",o.prototype.update.call(this)},i.prototype.buildCSSClass=function(){return o.prototype.buildCSSClass.call(this)+" vjs-resolution-button"},o.registerComponent("ResolutionMenuButton",i),r=function(e){var r=t.mergeOptions(l,e),n=this;function s(e,t){return e.res&&t.res?+t.res-+e.res:0}function o(e){var t={label:{},res:{},type:{}};return e.map(function(e){u(t,"label",e),u(t,"res",e),u(t,"type",e),a(t,"label",e),a(t,"res",e),a(t,"type",e)}),t}function u(e,t,r){null==e[t][r[t]]&&(e[t][r[t]]=[])}function a(e,t,r){e[t][r[t]].push(r)}n.updateSrc=function(e){if(!e)return n.src();e=e.filter(function(e){try{return""!==n.canPlayType(e.type)}catch(e){return!0}}),this.currentSources=e.sort(s),this.groupedSrc=o(this.currentSources);var t=function(e,t){var l=r.default,n="";"high"===l?(l=t[0].res,n=t[0].label):"low"!==l&&null!=l&&e.res[l]?e.res[l]&&(n=e.res[l][0].label):(l=t[t.length-1].res,n=t[t.length-1].label);return{res:l,label:n,sources:e.res[l]}}(this.groupedSrc,this.currentSources);return this.currentResolutionState={label:t.label,sources:t.sources},n.trigger("updateSources"),n.setSourcesSanitized(t.sources,t.label),n.trigger("resolutionchange"),n},n.currentResolution=function(e,t){if(null==e)return this.currentResolutionState;if(this.groupedSrc&&this.groupedSrc.label&&this.groupedSrc.label[e]){var l=this.groupedSrc.label[e],s=n.currentTime();!n.paused()&&this.player_.options_.bigPlayButton&&this.player_.bigPlayButton.hide();var o="loadeddata";return"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(o="timeupdate"),n.setSourcesSanitized(l,e,t||r.customSourcePicker).one(o,function(){n.currentTime(s),n.trigger("resolutionchange")}),n}},n.getGroupedSrc=function(){return this.groupedSrc},n.setSourcesSanitized=function(e,t,r){return this.currentResolutionState={label:t,sources:e},"function"==typeof r?r(n,e,t):(n.src(e.map(function(e){return{src:e.src,type:e.type,res:e.res}})),n)},n.ready(function(){if(r.ui){var e=new i(n,r);n.controlBar.resolutionSwitcher=n.controlBar.el_.insertBefore(e.el_,n.controlBar.getChild("fullscreenToggle").el_),n.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)}}n.options_.sources.length>1&&n.updateSrc(n.options_.sources),"Youtube"===n.techName_&&function(e){var t={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"auto"}},l=function(t,r,l){return e.tech_.ytPlayer.setPlaybackQuality(r[0]._yt),e.trigger("updateSources"),e};r.customSourcePicker=l,e.tech_.ytPlayer.setPlaybackQuality("auto"),e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(r){for(var n in t)if(n.yt===r.data)return void e.currentResolution(n.label,l)}),e.one("play",function(){var r=e.tech_.ytPlayer.getAvailableQualityLevels(),n=[];r.map(function(r){n.push({src:e.src().src,type:e.src().type,label:t[r].label,res:t[r].res,_yt:t[r].yt})}),e.groupedSrc=o(n);var s={label:"auto",res:0,sources:e.groupedSrc.label.auto};this.currentResolutionState={label:s.label,sources:s.sources},e.trigger("updateSources"),e.setSourcesSanitized(s.sources,s.label,l)})}(n)})},t.registerPlugin("videoJsResolutionSwitcher",r)}(window,e)}();
//# sourceMappingURL=/sm/525188af68536a6139f2f8fb5e6351257323ca59c1eb4563e5c317b0e40622f7.map